<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>System OS // Tri-Core</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;900&family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@500;700&family=Space+Grotesk:wght@300;700&display=swap" rel="stylesheet">

<style>
/* --- CORE & OPTIMIZATION --- */
:root {
  --ease-expo: cubic-bezier(0.19, 1, 0.22, 1);
}

* { box-sizing: border-box; margin: 0; padding: 0; cursor: none; user-select: none; }

body {
  overflow: hidden; height: 100vh; width: 100vw;
  background: #000;
  transition: background 0.5s;
}

/* GPU Acceleration Class */
.gpu-accel { transform: translate3d(0,0,0); backface-visibility: hidden; will-change: transform; }

/* --- ENHANCED VERSION SWITCHER --- */
#kernel-dock {
  position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10000;
  background: rgba(10,10,10,0.9); border: 1px solid rgba(255,255,255,0.15);
  padding: 6px; border-radius: 100px;
  display: flex; gap: 4px;
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.k-btn {
  font-family: 'JetBrains Mono'; font-size: 11px; font-weight: 700;
  background: transparent; border: none; color: #555;
  padding: 8px 18px; border-radius: 20px;
  transition: 0.3s var(--ease-expo);
  position: relative; overflow: hidden;
}

.k-btn::before {
  content:''; position: absolute; inset: 0; background: rgba(255,255,255,0.1);
  transform: scaleX(0); transform-origin: left; transition: transform 0.3s;
}
.k-btn:hover::before { transform: scaleX(1); }

/* Version Specific Active States for Switcher */
body[data-version="7"] .k-btn[data-v="7"] { background: #00f3ff; color: #000; box-shadow: 0 0 15px #00f3ff80; }
body[data-version="8"] .k-btn[data-v="8"] { background: #ff3e00; color: #fff; box-shadow: 0 0 15px #ff3e0080; }
body[data-version="9"] .k-btn[data-v="9"] { background: #fff; color: #000; box-shadow: 0 0 20px rgba(255,255,255,0.8); }

/* --- SHARED CURSOR --- */
#cursor {
  position: fixed; top: 0; left: 0; z-index: 10001; pointer-events: none;
  mix-blend-mode: difference;
}
.c-dot { width: 4px; height: 4px; background: white; border-radius: 50%; position: absolute; transform: translate(-50%, -50%); }
.c-ring { 
  width: 40px; height: 40px; border: 1px solid rgba(255,255,255,0.5); 
  border-radius: 50%; position: absolute; transform: translate(-50%, -50%);
  transition: 0.1s;
}

/* V9 Special Cursor */
body[data-version="9"] .c-dot { width: 2px; height: 2px; background: #fff; }
body[data-version="9"] .c-ring { border: 1px dashed rgba(255,255,255,0.3); width: 60px; height: 60px; animation: spin 10s linear infinite; }
body[data-version="9"] .c-ring.hovered { width: 15px; height: 15px; border-style: solid; background: #fff; mix-blend-mode: exclusion; }

@keyframes spin { to { transform: translate(-50%, -50%) rotate(360deg); } }

/* =========================================
   SYSTEM 7.0 (Legacy / Cyberpunk)
   ========================================= */
.v7-wrapper { display: none; }
body[data-version="7"] .v7-wrapper { display: block; }
body[data-version="7"] { --accent: #00f3ff; font-family: 'Inter', sans-serif; }

.v7-bg-grid {
  position: fixed; inset: 0; z-index: 0;
  background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
  background-size: 50px 50px;
  transform: perspective(1000px) rotateX(15deg) scale(1.5);
  transform-origin: top center; opacity: 0.4;
}
.v7-content { position: relative; z-index: 2; padding: 120px 10vw; color: #fff; }
.v7-h1 { font-size: 5rem; font-weight: 900; line-height: 0.9; text-transform: uppercase; margin-bottom: 40px; }
.v7-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
.v7-card {
  background: rgba(30,30,35,0.6); border: 1px solid rgba(255,255,255,0.1);
  padding: 30px; height: 250px; display: flex; flex-direction: column; justify-content: flex-end;
  transition: 0.3s;
}
.v7-card:hover { border-color: var(--accent); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

/* =========================================
   SYSTEM 8.0 (Aero / Spatial)
   ========================================= */
.v8-wrapper { display: none; }
body[data-version="8"] .v8-wrapper { display: flex; }
body[data-version="8"] { --accent: #ff3e00; font-family: 'Rajdhani', sans-serif; background: #050505; }

/* Reduced Orb Count for Performance */
.v8-orb {
  position: fixed; width: 60vw; height: 60vw; border-radius: 50%;
  filter: blur(100px); opacity: 0.3; z-index: 0;
  background: radial-gradient(circle, var(--accent), transparent 70%);
  animation: float 15s infinite ease-in-out;
}
@keyframes float { 0%,100% { transform: translate(-20%, -20%); } 50% { transform: translate(10%, 10%); } }

.v8-stage {
  position: relative; z-index: 5; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;
}
.v8-glass-panel {
  width: 80vw; height: 80vh;
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 24px;
  /* Optimization: Replaced heavy backdrop-filter with distinct opacity layers */
  box-shadow: 0 40px 80px rgba(0,0,0,0.8);
  display: grid; grid-template-columns: 80px 1fr;
  overflow: hidden;
}
.v8-nav { border-right: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; align-items: center; padding-top: 40px; gap: 20px; }
.v8-icon { width: 40px; height: 40px; border-radius: 10px; display: grid; place-items: center; color: #666; transition: 0.3s; }
.v8-icon.active { background: rgba(255,255,255,0.1); color: #fff; }

.v8-main { padding: 60px; color: #fff; position: relative; }
.v8-hero-txt { font-size: 6rem; font-weight: 700; line-height: 1; margin-bottom: 20px; }

/* =========================================
   SYSTEM 9.0 ("ZENITH" - Void/Mesh UI)
   ========================================= */
.v9-wrapper { display: none; }
body[data-version="9"] .v9-wrapper { display: block; }
body[data-version="9"] { 
  background: #000; 
  font-family: 'Space Grotesk', sans-serif; 
  color: #f0f0f0;
}

/* V9 Background: Mesh Canvas */
#zenithCanvas {
  position: fixed; inset: 0; z-index: 0; opacity: 0.6;
}

/* V9 Layout */
.v9-ui-layer {
  position: relative; z-index: 10; height: 100vh; padding: 40px;
  display: grid; grid-template-rows: 1fr auto;
}

/* Zenith Typography */
.z-status {
  position: absolute; top: 40px; left: 40px;
  font-family: 'JetBrains Mono'; font-size: 10px; letter-spacing: 2px; color: #666;
  border-left: 2px solid #fff; padding-left: 10px;
}

.z-hero-section {
  display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
}
.z-title {
  font-size: 12vh; font-weight: 300; letter-spacing: -4px; color: #fff;
  mix-blend-mode: exclusion;
  position: relative;
}
/* Glitch/Noise Text Decoration */
.z-title::after {
  content: 'ZENITH_OS'; position: absolute; top: 0; left: 0; color: transparent;
  text-shadow: 2px 0 red; opacity: 0; transition: 0.3s; pointer-events: none;
}
.z-title:hover::after { opacity: 0.5; transform: translateX(-4px); }

.z-sub {
  font-family: 'JetBrains Mono'; font-size: 12px; margin-top: 20px; color: #888;
  border: 1px solid #333; padding: 10px 20px; border-radius: 50px;
  background: rgba(0,0,0,0.5);
}

/* Zenith Magnetic Toolbar (Bottom) */
.z-dock {
  display: flex; justify-content: center; gap: 60px; padding-bottom: 40px;
}
.z-tool {
  font-size: 14px; color: #666; text-transform: uppercase; letter-spacing: 1px;
  position: relative; transition: color 0.3s;
  padding: 10px;
}
.z-tool::after {
  content:''; position: absolute; bottom: 0; left: 50%; width: 0%; height: 1px;
  background: #fff; transition: 0.3s var(--ease-expo); transform: translateX(-50%);
}
.z-tool:hover { color: #fff; }
.z-tool:hover::after { width: 100%; }

/* Zenith Floating Widgets */
.z-widget {
  position: absolute; width: 200px;
  background: rgba(0,0,0,0.8); border: 1px solid #222;
  padding: 15px; font-family: 'JetBrains Mono'; font-size: 10px; color: #aaa;
}
.z-w-1 { top: 20%; right: 10%; border-right: 2px solid #fff; }
.z-w-2 { bottom: 20%; left: 10%; border-left: 2px solid #fff; }

.z-bar { width: 100%; height: 2px; background: #222; margin-top: 5px; }
.z-fill { height: 100%; background: #fff; width: 0%; animation: loadBar 4s infinite ease-in-out; }
@keyframes loadBar { 0% {width: 10%} 50% {width: 90%} 100% {width: 10%} }

</style>
</head>
<body data-version="7">

<!-- VERSION CONTROLLER -->
<div id="kernel-dock" class="hover-target">
  <button class="k-btn hover-target" data-v="7" onclick="setVersion(7)">SYS 7</button>
  <button class="k-btn hover-target" data-v="8" onclick="setVersion(8)">SYS 8</button>
  <button class="k-btn hover-target" data-v="9" onclick="setVersion(9)">ZENITH</button>
</div>

<!-- GLOBAL CURSOR -->
<div id="cursor"><div class="c-dot"></div><div class="c-ring"></div></div>

<!-- =========================
     VERSION 7: CYBERPUNK
     ========================= -->
<div class="v7-wrapper">
  <div class="v7-bg-grid"></div>
  <div class="v7-content gpu-accel">
    <h1 class="v7-h1">System 7<br><span style="color:var(--accent); font-size:0.5em;">// LEGACY GRID</span></h1>
    <div class="v7-grid">
      <div class="v7-card hover-target"><h3>NODE_01</h3><p style="color:#666; margin-top:10px;">CONNECTED</p></div>
      <div class="v7-card hover-target"><h3>NODE_02</h3><p style="color:#666; margin-top:10px;">STANDBY</p></div>
      <div class="v7-card hover-target"><h3>NODE_03</h3><p style="color:#666; margin-top:10px;">OFFLINE</p></div>
    </div>
  </div>
</div>

<!-- =========================
     VERSION 8: AERO GLASS
     ========================= -->
<div class="v8-wrapper">
  <div class="v8-orb gpu-accel"></div>
  <div class="v8-stage">
    <div class="v8-glass-panel gpu-accel">
      <nav class="v8-nav">
        <div class="v8-icon active hover-target">●</div>
        <div class="v8-icon hover-target">▲</div>
        <div class="v8-icon hover-target">■</div>
      </nav>
      <main class="v8-main">
        <h1 class="v8-hero-txt">Aero<br><span style="color:var(--accent)">Dynamics</span></h1>
        <p style="max-width:400px; color:#aaa; line-height:1.6;">
          Spatial interface enabled. Fluid dynamics processing in background. Reduced blur radius for enhanced performance.
        </p>
        <div style="margin-top: 40px; display:flex; gap:20px;">
           <div style="padding: 15px 30px; background:var(--accent); border-radius:30px; color:#fff; font-weight:bold;" class="hover-target">INITIATE</div>
        </div>
      </main>
    </div>
  </div>
</div>

<!-- =========================
     VERSION 9: ZENITH
     ========================= -->
<div class="v9-wrapper">
  <canvas id="zenithCanvas"></canvas>
  <div class="v9-ui-layer">
    
    <div class="z-status">
      RUNNING ZENITH KERNEL<br>
      FPS: <span id="fps-counter">60</span>
    </div>

    <div class="z-w-1 gpu-accel">
      <div>MEMORY HEAP</div>
      <div class="z-bar"><div class="z-fill"></div></div>
    </div>

    <div class="z-hero-section">
      <h1 class="z-title hover-target" data-magnetic="0.3">ZENITH</h1>
      <div class="z-sub hover-target">THE VOID INTERFACE</div>
    </div>

    <div class="z-w-2 gpu-accel">
      <div>NETWORK MESH</div>
      <div class="z-bar"><div class="z-fill" style="animation-delay: 1s"></div></div>
    </div>

    <div class="z-dock">
      <div class="z-tool hover-target" data-magnetic="0.5">Terminal</div>
      <div class="z-tool hover-target" data-magnetic="0.5">Deploy</div>
      <div class="z-tool hover-target" data-magnetic="0.5">Audit</div>
      <div class="z-tool hover-target" data-magnetic="0.5">Null</div>
    </div>
  </div>
</div>

<script>
/* --- CORE STATE MANAGEMENT --- */
let currentVersion = 7;
let v9CanvasActive = false;

function setVersion(v) {
  currentVersion = v;
  document.body.setAttribute('data-version', v);
  
  // Optimization: Toggle Heavy Scripts
  if (v === 9) {
    v9CanvasActive = true;
    initZenithMesh();
  } else {
    v9CanvasActive = false;
  }
}

/* --- CURSOR ENGINE --- */
const cursor = document.getElementById('cursor');
const cDot = cursor.querySelector('.c-dot');
const cRing = cursor.querySelector('.c-ring');

let mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };
let smoothMouse = { x: window.innerWidth/2, y: window.innerHeight/2 };

document.addEventListener('mousemove', e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
  
  // Instant dot
  cDot.style.transform = `translate(${mouse.x}px, ${mouse.y}px) translate(-50%,-50%)`;
});

// Physics Loop
function animateCursor() {
  // Smooth Ring Follow
  smoothMouse.x += (mouse.x - smoothMouse.x) * 0.15;
  smoothMouse.y += (mouse.y - smoothMouse.y) * 0.15;
  
  cRing.style.transform = `translate(${smoothMouse.x}px, ${smoothMouse.y}px) translate(-50%,-50%)`;
  
  // V9 Magnetic Effect logic
  if(currentVersion === 9) {
    document.querySelectorAll('[data-magnetic]').forEach(el => {
      const rect = el.getBoundingClientRect();
      const dist = Math.hypot(mouse.x - (rect.left + rect.width/2), mouse.y - (rect.top + rect.height/2));
      
      if(dist < 100) {
        const power = el.getAttribute('data-magnetic');
        const mx = (mouse.x - (rect.left + rect.width/2)) * power;
        const my = (mouse.y - (rect.top + rect.height/2)) * power;
        el.style.transform = `translate(${mx}px, ${my}px)`;
      } else {
        el.style.transform = `translate(0px, 0px)`;
      }
    });
  }

  requestAnimationFrame(animateCursor);
}
animateCursor();

// Hover interactions
document.querySelectorAll('.hover-target').forEach(el => {
  el.addEventListener('mouseenter', () => cRing.classList.add('hovered'));
  el.addEventListener('mouseleave', () => cRing.classList.remove('hovered'));
});

/* --- V9 ZENITH MESH ENGINE (OPTIMIZED) --- */
const canvas = document.getElementById('zenithCanvas');
const ctx = canvas.getContext('2d');
let points = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);

class Point {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.vx = (Math.random() - 0.5) * 0.5; // Slow velocity
    this.vy = (Math.random() - 0.5) * 0.5;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
    if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
  }
}

function initZenithMesh() {
  resizeCanvas();
  points = [];
  // Create sparse network (only 60 points for performance)
  for(let i=0; i<60; i++) points.push(new Point());
  drawZenith();
}

function drawZenith() {
  if(!v9CanvasActive) return; // Stop drawing if not in V9

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Connection Distance
  const connectDist = 150;
  
  ctx.fillStyle = '#fff';
  
  points.forEach((p, index) => {
    p.update();
    
    // Draw Point
    ctx.beginPath();
    ctx.arc(p.x, p.y, 1, 0, Math.PI*2);
    ctx.fill();
    
    // Draw Connections
    for(let j = index + 1; j < points.length; j++) {
      const p2 = points[j];
      const dist = Math.hypot(p.x - p2.x, p.y - p2.y);
      
      if(dist < connectDist) {
        ctx.beginPath();
        ctx.strokeStyle = `rgba(255,255,255, ${1 - dist/connectDist})`;
        ctx.lineWidth = 0.5;
        ctx.moveTo(p.x, p.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.stroke();
      }
    }
    
    // Mouse Interaction
    const mouseDist = Math.hypot(p.x - mouse.x, p.y - mouse.y);
    if(mouseDist < 200) {
      ctx.beginPath();
      ctx.strokeStyle = `rgba(255,255,255,0.1)`;
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(mouse.x, mouse.y);
      ctx.stroke();
    }
  });

  requestAnimationFrame(drawZenith);
}

// FPS Counter Logic for V9
let frames = 0;
let lastTime = performance.now();
const fpsEl = document.getElementById('fps-counter');

function measureFPS() {
  if(currentVersion === 9) {
    const now = performance.now();
    frames++;
    if(now - lastTime >= 1000) {
      fpsEl.innerText = frames;
      frames = 0;
      lastTime = now;
    }
  }
  requestAnimationFrame(measureFPS);
}
measureFPS();

</script>
</body>
</html>
