<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>/six â€” System 8.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #020203;
  --glass: rgba(255, 255, 255, 0.02);
  --glass-border: rgba(255, 255, 255, 0.08);
  --glass-highlight: rgba(255, 255, 255, 0.15);
  
  --primary: #f2f2f2;
  --accent: #ff003c; /* Cyber Red */
  --accent-secondary: #00f0ff; /* Neon Cyan */
  
  --ease-elastic: cubic-bezier(0.16, 1, 0.3, 1); /* The "Perfect" Snap */
  --ease-smooth: cubic-bezier(0.33, 1, 0.68, 1);
}

* { box-sizing: border-box; margin: 0; padding: 0; cursor: none; user-select: none; }

body {
  font-family: 'Inter', sans-serif;
  background-color: var(--bg);
  color: var(--primary);
  overflow: hidden;
  height: 100vh; width: 100vw;
  perspective: 2000px;
}

/* --- AMBIENCE --- */
.world-grid {
  position: fixed; inset: -50%; width: 200%; height: 200%;
  background-image: 
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 80px 80px;
  transform: rotateX(60deg) translateY(-100px) translateZ(-200px);
  mask-image: linear-gradient(to bottom, transparent, black 20%, black 80%, transparent);
  animation: grid-scroll 20s linear infinite;
  z-index: -1;
}
@keyframes grid-scroll { from { transform: rotateX(60deg) translateY(0) translateZ(-200px); } to { transform: rotateX(60deg) translateY(80px) translateZ(-200px); } }

.particles {
  position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, rgba(255,0,60,0.05), transparent 60%);
  pointer-events: none; z-index: 0;
}

/* --- CURSOR --- */
#cursor {
  position: fixed; top: 0; left: 0; z-index: 9999; pointer-events: none;
  mix-blend-mode: exclusion;
}
.c-dot { width: 4px; height: 4px; background: white; border-radius: 50%; position: absolute; transform: translate(-50%,-50%); }
.c-circle {
  width: 40px; height: 40px; border: 1px solid rgba(255,255,255,0.4); border-radius: 50%;
  position: absolute; transform: translate(-50%,-50%);
  transition: width 0.3s var(--ease-elastic), height 0.3s var(--ease-elastic), border-color 0.2s;
}
body.hovering .c-circle { width: 60px; height: 60px; border-color: var(--accent-secondary); background: rgba(255,255,255,0.05); }

/* --- MAIN LAYOUT --- */
#app {
  padding: 100px 8vw;
  transition: transform 0.8s var(--ease-elastic), filter 0.8s;
  transform-style: preserve-3d;
}
body.has-modal #app {
  transform: scale(0.9) translateZ(-50px) rotateX(2deg);
  filter: blur(10px) brightness(0.5);
  pointer-events: none;
}

.hero h1 {
  font-size: 8vw; font-weight: 800; line-height: 0.8; letter-spacing: -0.04em;
  background: linear-gradient(180deg, #fff, #555); -webkit-background-clip: text; color: transparent;
  margin-bottom: 20px;
}

/* --- CARDS --- */
.card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 40px; margin-top: 80px; }

.card {
  height: 360px;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  border-radius: 24px;
  padding: 30px;
  position: relative;
  transition: transform 0.4s var(--ease-elastic), border-color 0.3s;
  overflow: hidden;
  backdrop-filter: blur(10px);
}
.card:hover { transform: translateY(-10px); border-color: var(--glass-highlight); }
.card::before { /* Scanline Sweep */
  content:''; position: absolute; inset: 0;
  background: linear-gradient(transparent, rgba(255,255,255,0.1), transparent);
  transform: translateY(-100%); transition: 0.5s;
}
.card:hover::before { transform: translateY(100%); }

.card-label { font-family: 'JetBrains Mono'; font-size: 11px; color: var(--accent-secondary); margin-bottom: 10px; display: block;}
.card h2 { font-size: 32px; font-weight: 300; }
.card-footer { position: absolute; bottom: 30px; left: 30px; font-family: 'JetBrains Mono'; font-size: 12px; color: #666; }

/* --- THE MODAL (CONSTRUCTOR) --- */
.modal-ghost {
  position: fixed; z-index: 1000;
  background: #050505;
  border-radius: 24px;
  border: 1px solid rgba(255,255,255,0.1);
  transform-origin: top left;
  will-change: transform, width, height, top, left;
  overflow: hidden;
  box-shadow: 0 40px 100px rgba(0,0,0,0.8);
  /* The Magic Transition */
  transition: 
    width 0.7s var(--ease-elastic),
    height 0.7s var(--ease-elastic),
    top 0.7s var(--ease-elastic),
    left 0.7s var(--ease-elastic),
    opacity 0.4s;
}

/* Modal Internal Layout */
.modal-content {
  opacity: 0; height: 100%; padding: 60px;
  display: grid; grid-template-columns: 1fr 1.5fr; gap: 60px;
  background: 
    radial-gradient(circle at top right, rgba(0, 240, 255, 0.05), transparent 40%),
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
}
.modal-ghost.active .modal-content { opacity: 1; transition: opacity 0.4s 0.2s; }

/* Construction Scanner Effect */
.scanner-line {
  position: absolute; top: 0; left: 0; width: 100%; height: 2px;
  background: var(--accent-secondary);
  box-shadow: 0 0 20px var(--accent-secondary);
  opacity: 0; pointer-events: none;
}
.modal-ghost.active .scanner-line {
  opacity: 1; animation: scan-down 1s var(--ease-smooth) forwards;
}
@keyframes scan-down { 0% { top: 0; opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

/* Content Stagger */
.stagger-in { opacity: 0; transform: translateY(20px); }
.modal-ghost.active .stagger-in {
  animation: slide-up 0.6s var(--ease-elastic) forwards;
}
@keyframes slide-up { to { opacity: 1; transform: translateY(0); } }

/* --- GRAVITY CLOSE BUTTON --- */
.close-gravity {
  position: absolute; top: 30px; right: 30px;
  width: 60px; height: 60px;
  border: none; background: transparent;
  z-index: 2000;
  display: flex; align-items: center; justify-content: center;
  opacity: 0; transform: scale(0);
  transition: opacity 0.3s, transform 0.3s var(--ease-elastic);
}
.modal-ghost.active .close-gravity { opacity: 1; transform: scale(1); transition-delay: 0.3s; }

/* When closing, fade out fast */
.modal-ghost.closing .close-gravity { opacity: 0; transform: scale(0.5); transition-delay: 0s; }

.c-core {
  width: 8px; height: 8px; background: var(--accent); border-radius: 50%;
  box-shadow: 0 0 10px var(--accent);
  transition: 0.3s;
}
.c-orbit {
  position: absolute; inset: 0; border: 1px solid rgba(255,255,255,0.2); border-radius: 50%;
  transition: 0.3s;
}
.close-gravity:hover .c-core { transform: scale(1.5); background: #fff; box-shadow: 0 0 20px #fff; }
.close-gravity:hover .c-orbit { border-color: var(--accent); transform: scale(1.1); }

/* --- HIDDEN DATA --- */
.data-source { display: none; }
.stat-box {
  border-top: 1px solid var(--glass-border); padding-top: 15px; margin-bottom: 20px;
}
.stat-val { font-size: 32px; font-weight: 600; color: #fff; }
.stat-key { font-family: 'JetBrains Mono'; font-size: 12px; color: #666; }

</style>
</head>
<body>

<div class="world-grid"></div>
<div class="particles"></div>
<div id="cursor"><div class="c-dot"></div><div class="c-circle"></div></div>

<div id="app">
  <section class="hero">
    <div style="font-family:'JetBrains Mono'; color:var(--accent-secondary); margin-bottom:10px;">/ SYSTEM 8.0</div>
    <h1>HOLODECK<br>INTERFACE</h1>
  </section>

  <div class="card-grid">
    
    <!-- CARD 1 -->
    <div class="card magnet-target" onclick="openModal(this)">
      <span class="card-label">01 // UNIT</span>
      <h2>PSX<br>OPERATOR</h2>
      <div class="card-footer">STATUS: ACTIVE</div>
      
      <!-- DATA -->
      <div class="data-source">
        <div class="stagger-in" style="animation-delay: 0.1s">
           <h1 style="font-size:60px; line-height:0.9; margin-bottom:20px; color:#fff">PSX<br>UNIT</h1>
           <p style="color:#888; line-height:1.6; max-width:400px;">
             The PSX Operator utilizes a quantum-entangled neural link for zero-latency combat awareness. Specialized in crystal destruction protocols.
           </p>
        </div>
        <div class="stagger-in" style="animation-delay: 0.2s">
           <div class="stat-box">
             <div class="stat-val" data-scramble="98.4%">98.4%</div>
             <div class="stat-key">COMBAT EFFICIENCY</div>
           </div>
           <div class="stat-box">
             <div class="stat-val" data-scramble="2ms">2ms</div>
             <div class="stat-key">NEURAL LATENCY</div>
           </div>
           <div class="stat-box">
             <div class="stat-val" style="color:var(--accent-secondary)">ONLINE</div>
             <div class="stat-key">SYSTEM STATUS</div>
           </div>
        </div>
      </div>
    </div>

    <!-- CARD 2 -->
    <div class="card magnet-target" onclick="openModal(this)">
      <span class="card-label">02 // PROTOCOL</span>
      <h2>VEX<br>DEFENSE</h2>
      <div class="card-footer">STATUS: LOCKED</div>
      
      <div class="data-source">
        <div class="stagger-in" style="animation-delay: 0.1s">
           <h1 style="font-size:60px; line-height:0.9; margin-bottom:20px; color:#fff">VEX<br>SYS</h1>
           <p style="color:#888; line-height:1.6; max-width:400px;">
             Autonomous defense grid providing area denial and logistical support. The backbone of the /six formation.
           </p>
        </div>
        <div class="stagger-in" style="animation-delay: 0.2s">
           <div class="stat-box">
             <div class="stat-val" data-scramble="100%">100%</div>
             <div class="stat-key">SHIELD INTEGRITY</div>
           </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
// --- CURSOR & MAGNETICS ---
const cursor = document.getElementById('cursor');
const circle = cursor.querySelector('.c-circle');
const dot = cursor.querySelector('.c-dot');
let mx = 0, my = 0;
let cx = 0, cy = 0;

document.addEventListener('mousemove', e => { mx = e.clientX; my = e.clientY; });

// Smooth follow loop
function updateCursor() {
  cx += (mx - cx) * 0.15;
  cy += (my - cy) * 0.15;
  
  // Basic Position
  dot.style.transform = `translate(${mx}px, ${my}px) translate(-50%, -50%)`;
  circle.style.transform = `translate(${cx}px, ${cy}px) translate(-50%, -50%)`;
  
  requestAnimationFrame(updateCursor);
}
updateCursor();

document.querySelectorAll('.magnet-target').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
  el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
});


// --- SCRAMBLE TEXT EFFECT ---
function scrambleText(element) {
  const original = element.getAttribute('data-scramble') || element.innerText;
  const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789/<>[]";
  let iterations = 0;
  
  const interval = setInterval(() => {
    element.innerText = original.split("").map((letter, index) => {
      if(index < iterations) return original[index];
      return chars[Math.floor(Math.random() * chars.length)];
    }).join("");
    
    if(iterations >= original.length) clearInterval(interval);
    iterations += 1/2; 
  }, 30);
}


// --- THE FLIP ENGINE ---
let activeModal = null;
let sourceCard = null;

function openModal(card) {
  if (activeModal) return;
  sourceCard = card;
  
  // 1. Measure
  const rect = card.getBoundingClientRect();
  
  // 2. Create Ghost (The Animation Container)
  const ghost = document.createElement('div');
  ghost.classList.add('modal-ghost');
  
  // Initial State: Match Card exactly
  ghost.style.top = rect.top + 'px';
  ghost.style.left = rect.left + 'px';
  ghost.style.width = rect.width + 'px';
  ghost.style.height = rect.height + 'px';
  
  // 3. Inject Content
  const contentHTML = card.querySelector('.data-source').innerHTML;
  ghost.innerHTML = `
    <div class="scanner-line"></div>
    <button class="close-gravity magnet-target" onclick="closeModal()">
      <div class="c-orbit"></div>
      <div class="c-core"></div>
    </button>
    <div class="modal-content">
      ${contentHTML}
    </div>
  `;
  
  document.body.appendChild(ghost);
  
  // 4. Interaction Lock & Visual Feedback
  document.body.classList.add('has-modal');
  card.style.opacity = '0'; // Hide original
  
  // 5. Expand (Next Frame)
  requestAnimationFrame(() => {
    ghost.classList.add('active');
    
    // Calculate Center
    const isMobile = window.innerWidth < 800;
    const w = isMobile ? window.innerWidth * 0.9 : 900;
    const h = isMobile ? window.innerHeight * 0.8 : 600;
    
    ghost.style.width = w + 'px';
    ghost.style.height = h + 'px';
    ghost.style.top = (window.innerHeight - h) / 2 + 'px';
    ghost.style.left = (window.innerWidth - w) / 2 + 'px';
    
    // Trigger Text Scramble
    ghost.querySelectorAll('[data-scramble]').forEach(el => scrambleText(el));
    
    // Add magnet hover to new close button
    const closeBtn = ghost.querySelector('.close-gravity');
    closeBtn.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
    closeBtn.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
  });
  
  activeModal = ghost;
}

function closeModal() {
  if (!activeModal) return;
  const rect = sourceCard.getBoundingClientRect();
  
  // 1. Remove Active States
  activeModal.classList.remove('active');
  activeModal.classList.add('closing'); // Fades out content/button immediately
  document.body.classList.remove('has-modal');
  
  // 2. Shrink Back
  activeModal.style.width = rect.width + 'px';
  activeModal.style.height = rect.height + 'px';
  activeModal.style.top = rect.top + 'px';
  activeModal.style.left = rect.left + 'px';
  
  // 3. Cleanup
  setTimeout(() => {
    sourceCard.style.opacity = '1';
    activeModal.remove();
    activeModal = null;
    sourceCard = null;
  }, 700); // Wait for transition
}

// Close on Escape
document.addEventListener('keydown', e => { if(e.key === 'Escape') closeModal(); });

</script>
</body>
</html>
